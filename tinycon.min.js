/*!
 * Tinycon - A small library for manipulating the Favicon
 * Tom Moor, http://tommoor.com
 * Copyright (c) 2012 Tom Moor
 * MIT Licensed
 * @version 0.2.6
*/
(function(){var a={};
var u=null;var p=null;var e=document.title;var m=null;var c=null;var d={};var g={width:7,height:9,font:"10px arial",colour:"#ffffff",background:"#F03D25",fallback:true};
var o=(function(){var v=navigator.userAgent.toLowerCase();return function(w){return v.indexOf(w)!==-1}}());var s={ie:o("msie"),chrome:o("chrome"),webkit:o("chrome")||o("safari"),
safari:o("safari")&&!o("chrome"),mozilla:o("mozilla")&&!o("chrome")&&!o("safari")};
var k=function(){var w=document.getElementsByTagName("link");for(var x=0,v=w.length;x<v;x++){if((w[x].getAttribute("rel")||"").match(/\bicon\b/)){return w[x]
}}return false};var j=function(){var w=document.getElementsByTagName("link");var y=document.getElementsByTagName("head")[0];for(var x=0,v=w.length;
x<v;x++){var z=(typeof(w[x])!=="undefined");if(z&&w[x].getAttribute("rel")==="icon"){y.removeChild(w[x])}}};var i=function(){if(!p||!u){var v=k();
p=u=v?v.getAttribute("href"):"/favicon.ico"}return u};var b=function(){if(!c){c=document.createElement("canvas");c.width=16;c.height=16}return c};
var n=function(v){j();var w=document.createElement("link");w.type="image/x-icon";w.rel="icon";w.href=v;document.getElementsByTagName("head")[0].appendChild(w)
};var f=function(v){if(window.console){window.console.log(v)}};var q=function(){return(!b().getContext||s.ie||s.safari||d.fallback==="force")};var t=function(v,x){if(q()){return r(v)
}var w=b().getContext("2d");var x=x||"#000000";var v=v||0;var y=i();m=new Image();m.onload=function(){w.clearRect(0,0,16,16);w.drawImage(m,0,0,m.width,m.height,0,0,16,16);
if(v>0){h(w,v,x)}l()};if(!y.match(/^data/)){m.crossOrigin="anonymous"}m.src=y};var r=function(v){if(d.fallback){if(v>0){document.title="("+v+") "+e
}else{document.title=e}}};var h=function(z,y,C){var v=(y+"").length-1;var B=d.width+(6*v);var x=16-B;var A=16-d.height;z.font=(s.webkit?"bold ":"")+d.font;
z.fillStyle=d.background;z.strokeStyle=d.background;z.lineWidth=1;z.fillRect(x,A,B-1,d.height);z.beginPath();z.moveTo(x-0.5,A+1);z.lineTo(x-0.5,15);
z.stroke();z.beginPath();z.moveTo(15.5,A+1);z.lineTo(15.5,15);z.stroke();z.beginPath();z.strokeStyle="rgba(0,0,0,0.3)";z.moveTo(x,16);z.lineTo(15,16);
z.stroke();z.fillStyle=d.colour;z.textAlign="right";z.textBaseline="top";z.fillText(y,15,s.mozilla?7:6)};var l=function(){if(!b().getContext){return
}n(b().toDataURL())};a.setOptions=function(w){d={};for(var v in g){d[v]=w.hasOwnProperty(v)?w[v]:g[v]}return this};a.setImage=function(v){u=v;l();
return this};a.setBubble=function(v,w){if(isNaN(parseFloat(v))||!isFinite(v)){return f("Bubble must be a number")}t(v,w);return this};a.reset=function(){a.setImage(p)
};a.needsFallback=q;a.setOptions(g);window.Tinycon=a})();